<main class="bg-gray-50 min-h-screen px-6 py-12">

  <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-8">

    <h2 class="text-3xl font-extrabold text-[#F97316] mb-6 text-center">Your Cart</h2>

    <% if @cart_items.any? %>
      <ul class="space-y-4 mb-6">
        <% @cart_items.each do |item| %>
          <li class="flex justify-between items-center p-4 bg-[#FFF7E5] rounded-xl shadow-sm hover:shadow-md transition">

            <!-- Item Info -->
            <div class="space-y-1">
              <strong class="text-[#F97316] text-lg"><%= item.food.name %></strong>
              <span class="text-gray-700">Unit Price: ₦<%= number_to_currency(item.food.price, unit: "", precision: 0) %></span>
              <span class="font-semibold text-gray-800">Total: ₦<%= number_to_currency(item.food.price * item.quantity, unit: "", precision: 0) %></span>

              <!-- Quantity Update -->
              <%= form_with url: cart_item_path(item), method: :patch, local: true, class: "flex items-center gap-2 mt-2" do |f| %>
                <%= f.label :quantity, "Quantity:", class: "font-medium text-gray-700" %>
                <%= f.number_field :quantity, value: item.quantity, min: 1, class: "w-20 text-center border rounded-full px-2 py-1 focus:outline-none focus:ring-2 focus:ring-[#F97316]" %>
                <%= f.submit "Update", class: "bg-[#F97316] text-white px-3 py-1 rounded-full font-semibold hover:bg-orange-500 transition" %>
              <% end %>
            </div>

            <!-- Remove Button -->
            <div>
              <%= button_to "Remove", remove_item_cart_path(item.food.id), method: :delete, data: { confirm: "Remove item?" }, class: "bg-red-600 text-white px-3 py-1 rounded-full hover:bg-red-500 transition" %>
            </div>
          </li>
        <% end %>
      </ul>

      <!-- Grand Total -->
      <div class="text-right text-2xl font-bold text-gray-800 mb-6">
        Grand Total: ₦<%= number_to_currency(@grand_total, unit: "", precision: 0) %>
      </div>

      <!-- Actions -->
      <div class="flex justify-between gap-4 flex-wrap">
        <%= link_to "← Back to Foods", foods_path, class: "bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 transition" %>
        <%= link_to "Checkout", checkout_path, class: "bg-[#FACC15] text-gray-900 px-4 py-2 rounded-full font-semibold hover:bg-yellow-400 transition" %>
      </div>

    <% else %>
      <p class="text-center text-gray-500 mb-4">Your cart is empty.</p>
      <div class="text-center">
        <%= link_to "Browse Foods", foods_path, class: "bg-[#F97316] text-white px-4 py-2 rounded-full font-semibold hover:bg-orange-500 transition" %>
      </div>
    <% end %>

  </div>

</main>

<style>
  @media (max-width: 640px) {
    .cart-item {
      flex-direction: column;
      align-items: flex-start;
    }
    .cart-actions {
      flex-direction: column;
      gap: 10px;
    }
    .cart-total {
      text-align: left;
    }
  }
</style>
