<div class="min-h-screen bg-gray-50 py-12">
  <main class="max-w-4xl mx-auto px-6">

    <h1 class="text-3xl font-extrabold text-red-600 mb-8 text-center">
      <%= @food.persisted? ? "Edit Food Item" : "Add New Food" %>
    </h1>

    <div class="bg-white rounded-3xl shadow-lg p-8 space-y-6">
      <%= form_with(model: [:vendor, @food], local: true, class: "space-y-6") do |f| %>

        <!-- Error Messages -->
        <% if @food.errors.any? %>
          <div class="p-4 bg-red-100 rounded-lg">
            <h2 class="font-bold text-red-600 mb-2">
              <%= pluralize(@food.errors.count, "error") %> prevented this food from being saved:
            </h2>
            <ul class="list-disc list-inside text-red-500">
              <% @food.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <!-- Name -->
        <div>
          <%= f.label :name, class: "block text-gray-700 font-semibold mb-2" %>
          <%= f.text_field :name, class: "w-full rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-200 focus:border-red-400" %>
        </div>

        <!-- Description -->
        <div>
          <%= f.label :description, class: "block text-gray-700 font-semibold mb-2" %>
          <%= f.text_area :description, rows: 4, class: "w-full rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-200 focus:border-red-400" %>
        </div>

        <!-- Price -->
        <div>
          <%= f.label :price, class: "block text-gray-700 font-semibold mb-2" %>
          <%= f.number_field :price, step: 0.01, class: "w-full rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-200 focus:border-red-400" %>
        </div>

        <!-- Stock -->
        <div>
          <%= f.label :stock, "Stock Quantity", class: "block text-gray-700 font-semibold mb-2" %>
          <%= f.number_field :stock, min: 0, class: "w-full rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-200 focus:border-red-400" %>
        </div>

        <!-- Categories -->
        <div>
          <p class="block text-gray-700 font-semibold mb-2">Categories</p>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
            <% Category.all.each do |category| %>
              <label class="flex items-center gap-2 border rounded-xl p-2 cursor-pointer hover:bg-gray-100 transition">
                <%= check_box_tag "food[category_ids][]", category.id, @food.category_ids.include?(category.id), id: "food_category_#{category.id}" %>
                <span class="text-gray-700"><%= category.name %></span>
              </label>
            <% end %>
          </div>
        </div>

        <!-- Image Upload -->
        <div>
          <%= f.label :image, "Food Image", class: "block text-gray-700 font-semibold mb-2" %>
          <%= f.file_field :image, class: "w-full" %>
          <% if @food.image.attached? %>
            <div class="mt-2">
              <p class="text-sm text-gray-500 mb-1">Current Image:</p>
              <%= image_tag @food.image.variant(resize_to_limit: [200, 200]), class: "rounded-xl shadow-md" %>
            </div>
          <% end %>
        </div>

        <!-- Submit -->
        <div class="text-center">
          <%= f.submit(@food.persisted? ? "Update Food" : "Create Food",
                       class: "bg-red-600 hover:bg-red-500 text-white font-bold px-8 py-3 rounded-full shadow-md transition transform hover:-translate-y-1") %>
        </div>

      <% end %>
    </div>
  </main>
</div>
