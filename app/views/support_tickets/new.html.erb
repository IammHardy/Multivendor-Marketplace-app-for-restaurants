<main class="max-w-4xl mx-auto px-6 py-12 bg-gray-50 min-h-screen">

  <div class="bg-white rounded-2xl shadow-lg p-8">
    <h1 class="text-3xl font-extrabold text-[#F97316] mb-6">Create a New Support Ticket</h1>

    <%= form_with model: @ticket, local: true do |f| %>
      <div class="mb-4">
        <%= f.label :subject, class: "block text-gray-700 font-semibold mb-1" %>
        <%= f.text_field :subject, class: "w-full rounded-2xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400 transition" %>
      </div>

      <div class="mb-4">
        <%= f.label :priority, class: "block text-gray-700 font-semibold mb-1" %>
        <%= f.select :priority, ["Low", "Medium", "High"], {}, 
              class: "w-full rounded-2xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400 transition" %>
      </div>

      <div class="mb-4">
        <% if current_user.orders.any? %>
          <%= f.label :order_id, "Related Order (optional)", class: "block text-gray-700 font-semibold mb-1" %>
          <%= f.collection_select :order_id, current_user.orders, :id, :order_number, 
                include_blank: true,
                class: "w-full rounded-2xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-400 transition" %>
        <% else %>
          <p class="text-gray-500 italic">No orders yet to link to this ticket.</p>
        <% end %>
      </div>

      <div class="mb-6">
        <%= f.label :body, "Description", class: "block text-gray-700 font-semibold mb-1" %>
        <%= f.text_area :body, rows: 5, 
              class: "w-full rounded-2xl border border-gray-300 px-4 py-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-400 transition" %>
      </div>

      <div class="flex flex-wrap gap-4">
        <%= f.submit "Create Ticket", 
              class: "bg-[#F97316] text-white px-6 py-2 rounded-full shadow hover:bg-orange-600 transition" %>
        <%= link_to "Back to Tickets", support_tickets_path, 
              class: "bg-gray-200 text-gray-800 px-6 py-2 rounded-full hover:bg-gray-300 transition" %>
      </div>
    <% end %>

  </div>

</main>
