<h1 class="text-2xl font-bold mb-6">Reports & Analytics</h1>

<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">

  <!-- Users Card -->
  <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition text-center">
    <p class="text-gray-500 font-medium">Users</p>
    <p class="text-3xl font-bold text-[#F97316] mt-2"><%= @total_users %></p>
    <canvas id="usersChart" class="mt-3 w-full" height="80"></canvas>
  </div>

  <!-- Vendors Card -->
  <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition text-center">
    <p class="text-gray-500 font-medium">Vendors</p>
    <p class="text-3xl font-bold text-[#F97316] mt-2"><%= @total_vendors %></p>
    <canvas id="vendorsChart" class="mt-3 w-full" height="80"></canvas>
  </div>

  <!-- Orders Card -->
  <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition text-center">
    <p class="text-gray-500 font-medium">Orders</p>
    <p class="text-3xl font-bold text-[#F97316] mt-2"><%= @total_orders %></p>
    <canvas id="ordersChart" class="mt-3 w-full" height="80"></canvas>
  </div>

  <!-- Revenue Card -->
  <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition text-center">
    <p class="text-gray-500 font-medium">Revenue</p>
    <p class="text-3xl font-bold text-green-600 mt-2">â‚¦<%= @revenue %></p>
    <canvas id="revenueChart" class="mt-3 w-full" height="80"></canvas>
  </div>

</div>

<script type="module">
  document.addEventListener("turbo:load", () => {
    const sparklineOptions = (color, data) => ({
      type: 'line',
      data: {
        labels: Array(data.length).fill(''),
        datasets: [{
          data: data,
          borderColor: color,
          borderWidth: 2,
          fill: false,
          tension: 0.3,
          pointRadius: 0
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: { x: { display: false }, y: { display: false } }
      }
    });

    if (window.Chart) {
      new Chart(document.getElementById('usersChart'), sparklineOptions('#F97316', <%= @users_last_7_days.to_json %>));
      new Chart(document.getElementById('vendorsChart'), sparklineOptions('#F97316', <%= @vendors_last_7_days.to_json %>));
      new Chart(document.getElementById('ordersChart'), sparklineOptions('#F97316', <%= @orders_last_7_days.to_json %>));
      new Chart(document.getElementById('revenueChart'), sparklineOptions('green', <%= @revenue_last_7_days.to_json %>));
    }
  });
</script>
