<div class="flex flex-col space-y-2 max-h-[500px] overflow-y-auto p-4 border rounded-lg bg-gray-50">
  <% @messages.each do |msg| %>
    <% sender_is_user = msg.sender_id == current_user.id && msg.sender_type == "User" %>

    <div class="flex <%= sender_is_user ? 'justify-end' : 'justify-start' %>">
      <div class="p-2 rounded-md <%= sender_is_user ? 'bg-blue-500 text-white' : 'bg-gray-200' %>">
        <%= msg.body %>

      </div>
    </div>
  <% end %>
</div>

<div class="mt-4">
 <%= form_with model: @new_message, url: users_conversation_messages_path(@conversation), local: true do |f| %>
  <%= f.text_area :body, class: "w-full border p-2 rounded-md", placeholder: "Type your message..." %>
  <%= f.submit "Send", class: "mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" %>
<% end %>


</div>
